[WARNING] aws-cdk-lib.aws_cloudfront_origins.S3Origin is deprecated.
  Use `S3BucketOrigin` or `S3StaticWebsiteOrigin` instead.
  This API will be removed in the next major release.
[WARNING] aws-cdk-lib.aws_cloudfront_origins.S3Origin#bind is deprecated.
  Use `S3BucketOrigin` or `S3StaticWebsiteOrigin` instead.
  This API will be removed in the next major release.
[WARNING] aws-cdk-lib.aws_stepfunctions.StateMachineProps#definition is deprecated.
  use definitionBody: DefinitionBody.fromChainable()
  This API will be removed in the next major release.
[WARNING] aws-cdk-lib.aws_stepfunctions.StateMachineProps#definition is deprecated.
  use definitionBody: DefinitionBody.fromChainable()
  This API will be removed in the next major release.
Bundling asset WorkflowStack/ProcessSubmissionFunction/Code/Stage...

  ...c36f2a1f41a4d4a35223d80072e1c0c3c40d812c9e5425c0-building\index.js  2.3kb

Done in 11ms
Bundling asset ApiStack/CreateTaskFunction/Code/Stage...
X [ERROR] Could not resolve "uuid"

    ../backend/src/tasks/create-task.ts:4:29:
      4 │ import { v4 as uuidv4 } from 'uuid';
        ╵                              ~~~~~~

  You can mark the path "uuid" as external to exclude it from the bundle, which will remove this error and leave the unresolved path in the bundle.

1 error
node:child_process:964
    throw err;
    ^

Error: Command failed: C:\Users\geron\.gemini\antigravity\scratch\aws-microtasks-platform\infrastructure\node_modules\@esbuild\win32-x64\esbuild.exe --bundle C:\Users\geron\.gemini\antigravity\scratch\aws-microtasks-platform\backend\src\tasks\create-task.ts --target=node18 --platform=node --outfile=C:\Users\geron\.gemini\antigravity\scratch\aws-microtasks-platform\infrastructure\cdk.out\bundling-temp-4d43ff727cc0d74f7b540a31ef7ec8178c4e15cb084768636a796d5f7a6f41ac-building\index.js --external:@aws-sdk/* --external:@smithy/*
    at genericNodeError (node:internal/errors:985:15)
    at wrappedFn (node:internal/errors:539:14)
    at checkExecSyncError (node:child_process:925:11)
    at Object.execFileSync (node:child_process:961:15)
    at Object.<anonymous> (C:\Users\geron\.gemini\antigravity\scratch\aws-microtasks-platform\infrastructure\node_modules\esbuild\bin\esbuild:222:28)
    at Module._compile (node:internal/modules/cjs/loader:1761:14)
    at Object..js (node:internal/modules/cjs/loader:1893:10)
    at Module.load (node:internal/modules/cjs/loader:1481:32)
    at Module._load (node:internal/modules/cjs/loader:1300:12)
    at TracingChannel.traceSync (node:diagnostics_channel:328:14) {
  status: 1,
  signal: null,
  output: [ null, null, null ],
  pid: 15264,
  stdout: null,
  stderr: null
}

Node.js v24.11.1
C:\Users\geron\.gemini\antigravity\scratch\aws-microtasks-platform\infrastructure\node_modules\aws-cdk-lib\aws-s3-assets\lib\asset.js:1
"use strict";var _a;Object.defineProperty(exports,"__esModule",{value:!0}),exports.Asset=void 0;var jsiiDeprecationWarnings=()=>{var tmp=require("../../.warnings.jsii.js");return jsiiDeprecationWarnings=()=>tmp,tmp};const JSII_RTTI_SYMBOL_1=Symbol.for("jsii.rtti");var path=()=>{var tmp=require("path");return path=()=>tmp,tmp},constructs_1=()=>{var tmp=require("constructs");return constructs_1=()=>tmp,tmp},compat_1=()=>{var tmp=require("./compat");return compat_1=()=>tmp,tmp},kms=()=>{var tmp=require("../../aws-kms");return kms=()=>tmp,tmp},s3=()=>{var tmp=require("../../aws-s3");return s3=()=>tmp,tmp},cdk=()=>{var tmp=require("../../core");return cdk=()=>tmp,tmp},errors_1=()=>{var tmp=require("../../core/lib/errors");return errors_1=()=>tmp,tmp},cxapi=()=>{var tmp=require("../../cx-api");return cxapi=()=>tmp,tmp};class Asset extends constructs_1().Construct{constructor(scope,id,props){super(scope,id);try{jsiiDeprecationWarnings().aws_cdk_lib_aws_s3_assets_AssetProps(props)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,Asset),error}if(!props.path)throw new(errors_1()).ValidationError("Asset path cannot be empty",this);this.isBundled=props.bundling!=null;const staging=new(cdk()).AssetStaging(this,"Stage",{...props,sourcePath:path().resolve(props.path),follow:props.followSymlinks??(0,compat_1().toSymlinkFollow)(props.follow),assetHash:props.assetHash??props.sourceHash});this.assetHash=staging.assetHash,this.sourceHash=this.assetHash;const stack=cdk().Stack.of(this);this.assetPath=staging.relativeStagedPath(stack),this.isFile=staging.packaging===cdk().FileAssetPackaging.FILE,this.isZipArchive=staging.isArchive;const location=stack.synthesizer.addFileAsset({packaging:staging.packaging,sourceHash:this.sourceHash,fileName:this.assetPath,deployTime:props.deployTime,displayName:props.displayName??cdk().Names.stackRelativeConstructPath(this)});this.s3BucketName=location.bucketName,this.s3ObjectKey=location.objectKey,this.s3ObjectUrl=location.s3ObjectUrl,this.httpUrl=location.httpUrl,this.s3Url=location.httpUrl;const kmsKey=location.kmsKeyArn?kms().Key.fromKeyArn(this,"Key",location.kmsKeyArn):void 0;this.bucket=s3().Bucket.fromBucketAttributes(this,"AssetBucket",{bucketName:this.s3BucketName,encryptionKey:kmsKey});for(const reader of props.readers??[])this.grantRead(reader)}addResourceMetadata(resource,resourceProperty){try{jsiiDeprecationWarnings().aws_cdk_lib_CfnResource(resource)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.addResourceMetadata),error}this.node.tryGetContext(cxapi().ASSET_RESOURCE_METADATA_ENABLED_CONTEXT)&&(resource.cfnOptions.metadata=resource.cfnOptions.metadata||{},resource.cfnOptions.metadata[cxapi().ASSET_RESOURCE_METADATA_PATH_KEY]=this.assetPath,resource.cfnOptions.metadata[cxapi().ASSET_RESOURCE_METADATA_IS_BUNDLED_KEY]=this.isBundled,resource.cfnOptions.metadata[cxapi().ASSET_RESOURCE_METADATA_PROPERTY_KEY]=resourceProperty)}grantRead(grantee){try{jsiiDeprecationWarnings().aws_cdk_lib_aws_iam_IGrantable(grantee)}catch(error){throw process.env.JSII_DEBUG!=="1"&&error.name==="DeprecationError"&&Error.captureStackTrace(error,this.grantRead),error}this.bucket.grantRead(grantee)}}exports.Asset=Asset,_a=JSII_RTTI_SYMBOL_1,Asset[_a]={fqn:"aws-cdk-lib.aws_s3_assets.Asset",version:"2.215.0"};
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   ^
ValidationError: Failed to bundle asset ApiStack/CreateTaskFunction/Code/Stage, bundle output is located at C:\Users\geron\.gemini\antigravity\scratch\aws-microtasks-platform\infrastructure\cdk.out\bundling-temp-4d43ff727cc0d74f7b540a31ef7ec8178c4e15cb084768636a796d5f7a6f41ac-building: ValidationError: cmd /c npx.cmd --no-install esbuild --bundle "C:\Users\geron\.gemini\antigravity\scratch\aws-microtasks-platform\backend\src\tasks\create-task.ts" --target=node18 --platform=node --outfile="C:\Users\geron\.gemini\antigravity\scratch\aws-microtasks-platform\infrastructure\cdk.out\bundling-temp-4d43ff727cc0d74f7b540a31ef7ec8178c4e15cb084768636a796d5f7a6f41ac-building\index.js" --external:@aws-sdk/* --external:@smithy/* run in directory C:\Users\geron\.gemini\antigravity\scratch\aws-microtasks-platform\infrastructure exited with status 1
    at path [ApiStack/CreateTaskFunction/Code/Stage] in aws-cdk-lib.AssetStaging

    at new Asset (C:\Users\geron\.gemini\antigravity\scratch\aws-microtasks-platform\infrastructure\node_modules\aws-cdk-lib\aws-s3-assets\lib\asset.js:1:1252)
    at AssetCode.bind (C:\Users\geron\.gemini\antigravity\scratch\aws-microtasks-platform\infrastructure\node_modules\aws-cdk-lib\aws-lambda\lib\code.js:5:4382)
    at new Function2 (C:\Users\geron\.gemini\antigravity\scratch\aws-microtasks-platform\infrastructure\node_modules\aws-cdk-lib\aws-lambda\lib\function.js:1:11029)
    at new Function2 (C:\Users\geron\.gemini\antigravity\scratch\aws-microtasks-platform\infrastructure\node_modules\aws-cdk-lib\core\lib\prop-injectable.js:1:488)
    at new NodejsFunction (C:\Users\geron\.gemini\antigravity\scratch\aws-microtasks-platform\infrastructure\node_modules\aws-cdk-lib\aws-lambda-nodejs\lib\function.js:1:2292)
    at new ApiStack (C:\Users\geron\.gemini\antigravity\scratch\aws-microtasks-platform\infrastructure\lib\api-stack.ts:46:34)
    at Object.<anonymous> (C:\Users\geron\.gemini\antigravity\scratch\aws-microtasks-platform\infrastructure\bin\infrastructure.ts:23:18)
    at Module._compile (node:internal/modules/cjs/loader:1761:14)
    at Module.m._compile (C:\Users\geron\.gemini\antigravity\scratch\aws-microtasks-platform\infrastructure\node_modules\ts-node\src\index.ts:1618:23)
    at node:internal/modules/cjs/loader:1893:10

NOTICES         (What's this? https://github.com/aws/aws-cdk/wiki/CLI-Notices)

34892	CDK CLI will collect telemetry data on command usage starting at version 2.1100.0 (unless opted out)

	Overview: We do not collect customer content and we anonymize the
	          telemetry we do collect. See the attached issue for more
	          information on what data is collected, why, and how to
	          opt-out. Telemetry will NOT be collected for any CDK CLI
	          version prior to version 2.1100.0 - regardless of
	          opt-in/out. You can also preview the telemetry we will start
	          collecting by logging it to a local file, by adding
	          `--unstable=telemetry --telemetry-file=my/local/file` to any
	          `cdk` command.

	Affected versions: cli: ^2.0.0

	More information at: https://github.com/aws/aws-cdk/issues/34892


If you don’t want to see a notice anymore, use "cdk acknowledge <id>". For example, "cdk acknowledge 34892".
npx ts-node --prefer-ts-exts bin/infrastructure.ts: Subprocess exited with error 1
